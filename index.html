<!doctype html>
<html lang="en" data-theme="dim">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Key Vault</title>

    <link rel="icon" type="image/png" href="./logo.png" />
    <link rel="stylesheet" href="./output.css" />
    <script src="./bundle.umd.min.js"></script>
    <script src="./utils.js"></script>
    <script src="./api.js"></script>
    <script src="./keys.js"></script>
    <script src="./test-utils.js" defer></script>
    <script src="./script.js" defer></script>

    <!--
    <link rel="icon" type="image/png" href="https://live-miracles.github.io/key-vault/logo.png" />
    <link rel="stylesheet" href="https://live-miracles.github.io/key-vault/v/0.0.0/output.css" />
    <script src="https://cdn.jsdelivr.net/npm/transliteration/dist/browser/bundle.umd.min.js"></script>
    <script crossorigin src="https://live-miracles.github.io/key-vault/v/0.0.0/utils.js" defer></script>
    <script crossorigin src="https://live-miracles.github.io/key-vault/v/0.0.0/api.js"></script>
    <script crossorigin src="https://live-miracles.github.io/key-vault/v/0.0.0/keys.js"></script>
    <script crossorigin src="https://live-miracles.github.io/key-vault/v/0.0.0/script.js" defer></script>
    -->
  </head>
  <body class="bg-base-100 text-base-content flex min-h-screen min-w-[620px] flex-col">
    <div class="flex items-center px-5 pt-3">
      <span class="text-xl">Event 2</span>
      <button title="Edit" class="btn btn-accent btn-xs ml-3">âœŽ</button>
      <button title="Delete" class="btn btn-error btn-xs ml-2">âœ–</button>
      <button title="Share" class="btn btn-accent btn-xs ml-2" onclick="showHideRoles()">ðŸ‘¥</button>

      <div class="ml-auto flex items-center gap-3">
        <label class="swap">
          <input id="saving-badge" type="checkbox" class="" disabled />
          <div class="swap-off"></div>
          <div class="swap-on"><span class="loading loading-infinity loading-xs"></span> Saving</div>
        </label>
        <span class="text-xl" id="user-email"><span class="loading loading-dots"></span></span>
      </div>
    </div>

    <div class="divider"></div>

    <div id="loading-alert" role="alert" class="alert alert-info fixed top-3 left-1/2 z-20 hidden w-fit -translate-x-1/2 transform">
      <span class="loading loading-infinity loading-md"></span>
      <span class="msg">Loading...</span>
    </div>

    <div id="success-alert" role="alert" class="alert alert-success fixed top-3 left-1/2 z-20 hidden w-fit max-w-[700px] -translate-x-1/2 transform">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span class="msg"></span>
    </div>

    <div id="error-alert" role="alert" class="alert alert-error fixed top-3 left-1/2 z-20 hidden w-fit max-w-[700px] -translate-x-1/2 transform">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span class="msg"></span>
    </div>

    <div id="copied-notification" role="alert" class="alert alert-success fixed bottom-3 left-1/2 z-20 hidden w-fit -translate-x-1/2 transform">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span>Copied</span>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="bg-base-200 border-base-300 rounded-box fixed z-50 hidden border shadow-lg">
      <ul class="menu w-32 p-2">
        <li><a onclick="copyKeyBtn()">Copy Key</a></li>
        <li><a onclick="copyRtmpBtn()">Copy Full URL</a></li>
        <li><a onclick="editKeyRow()">Edit</a></li>
        <li><a onclick="deleteKeyRow()" class="text-error">Delete</a></li>
      </ul>
    </div>

    <dialog id="key-modal" class="modal">
      <div class="modal-box max-w-[800px]">
        <input type="text" id="out-pipe-id-input" class="hidden" />
        <input type="text" id="out-id-input" class="hidden" />

        <div class="focus mx-auto mt-2 w-full max-w-[800px] space-y-3 px-4">
          <fieldset class="fieldset inline-block w-64">
            <legend class="fieldset-legend">Key Name</legend>
            <input type="text" id="key-name-input" class="input" placeholder="Type here" />
          </fieldset>

          <fieldset class="fieldset ml-2 inline-block w-40">
            <legend class="fieldset-legend">Server URL</legend>

            <select class="select" id="server-url-input">
              <option selected="" value="">Custom</option>
              <option value="rtmp://a.rtmp.youtube.com/live2/">YouTube</option>
              <option value="rtmp://b.rtmp.youtube.com/live2?backup=1/">YT Backup</option>
              <option value="rtmps://live-api-s.facebook.com:443/rtmp/">Facebook</option>
              <option value="rtmps://edgetee-upload-${s_prp}.xx.fbcdn.net:443/rtmp/">Instagram</option>
              <option value="rtmp://live-ingest-01.vd0.co:1935/livestream/">VDO Cipher</option>
              <option value="rtmp://ovsu.okcdn.ru/input/">VK Video</option>
            </select>
          </fieldset>

          <fieldset class="fieldset">
            <legend class="fieldset-legend">Custom URL</legend>
            <input type="text" id="custom-url-input" class="input w-full" placeholder="Type here" />
          </fieldset>

          <fieldset class="fieldset">
            <legend class="fieldset-legend">Stream Key</legend>
            <input type="text" id="stream-key-input" class="input w-full" placeholder="Type here" />
          </fieldset>
        </div>

        <div class="modal-action">
          <form method="dialog">
            <button class="btn mx-2">Cancel</button>
            <button class="btn btn-accent" onclick="editKeyFormBtn(event)">Update</button>
          </form>
        </div>
      </div>
    </dialog>

    <div class="flex min-h-0 flex-1 flex-col">
      <div class="hidden overflow-x-auto" id="role-table">
        <div class="overflow-x-auto">
          <table class="table">
            <!-- head -->
            <thead>
              <tr>
                <th>Email</th>
                <th>Role</th>
                <th>Language</th>
                <th>Remarks</th>
              </tr>
            </thead>
            <tbody id="role-rows">
              <tr>
                <th><span class="loading loading-dots loading-xs"></span></th>
                <td><span class="loading loading-dots loading-xs"></span></td>
                <td><span class="loading loading-dots loading-xs"></span></td>
                <td><span class="loading loading-dots loading-xs"></span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="mt-3 text-center">
          <button class="btn btn-accent btn-sm text-xl font-extrabold" id="add-role-btn" onclick="addRoleBtn()" title="Add">+</button>
        </div>
        <div class="divider"></div>
      </div>

      <div class="min-h-0 flex-1 overflow-y-auto" id="key-table">
        <div class="overflow-x-auto">
          <table class="table">
            <!-- head -->
            <thead>
              <tr>
                <th></th>
                <th>Name</th>
                <th>Type</th>
                <th>Language</th>
                <th>Server URL</th>
                <th>Key</th>
                <th>Remarks</th>
              </tr>
            </thead>
            <tbody id="key-rows">
              <tr>
                <th><span class="loading loading-dots loading-xs"></span></th>
                <td><span class="loading loading-dots loading-xs"></span></td>
                <td><span class="loading loading-dots loading-xs"></span></td>
                <td><span class="loading loading-dots loading-xs"></span></td>
                <td><span class="loading loading-dots loading-xs"></span></td>
                <td><span class="loading loading-dots loading-xs"></span></td>
                <td><span class="loading loading-dots loading-xs"></span></td>
              </tr>
            </tbody>
          </table>
          <div class="mt-3 text-center">
            <button class="btn btn-accent btn-sm text-xl font-extrabold" id="add-key-btn" onclick="addKeyBtn()" title="Add">+</button>
          </div>
        </div>
      </div>

      <div class="flex flex-shrink-0 items-center">
        <button class="btn btn-accent btn-sm mx-3 text-2xl font-extrabold" title="Add">+</button>
        <div role="tablist" class="tabs tabs-box">
          <a role="tab" class="tab tab-active"><span class="loading loading-dots loading-sm"></span> </a>
        </div>
      </div>
    </div>
  </body>
</html>
